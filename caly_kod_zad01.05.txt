using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Kulki
{
    public partial class Form1 : Form{
        Graphics grafika;
        int x = 150;//szerokosc kulki    
        int y = 100;//wysokosc kulki
        int dx = 3;//o ile przesuwa sie kulka w poziomie
        int dy = 3;//o ile przesuwa sie kulka w pionie

        public Form1(){
            InitializeComponent();
            this.Paint += new PaintEventHandler(rysujKulke);//PaintEventHandler reprezentuje metode ktora bedzie obslugiwac Paint 
            this.DoubleBuffered = true;//podwojne buforowanie pamieci aby zmniejszyc migotanie kulki
        }

        private void rysujKulke(object sender, PaintEventArgs e)
        {
            grafika = e.Graphics;//ustawiam dla zmiennej globalnej grafika inicjalizacje na Graphics z obiektu PaintEventArgs 
            SolidBrush RysowanieKulki = new SolidBrush(Color.PaleGoldenrod);//tworze czerwony solidBrush aby zaraz go uzyc w tworzeniu kulki
            grafika.FillEllipse(RysowanieKulki, x, y, 50, 50);//tworze kulke z wyzej wymienionym kolorem i stylem rysowanie
        }

        private void ruszKulke()
        {
            int nowaKulkaX = x + dx;//ustawiam nowejkulce wspolrzedne starej kulki
            int nowaKulkaY = y + dy;

            if (nowaKulkaX < 0 || nowaKulkaX > this.ClientSize.Width-50)//sprawdzam czy kulka nie wychodzi poza szerokosc mojego panelu
                dx = -dx;//jesli wychodzi zmieniam kierunek ruchu w odwrotna strone
            //ClientSize powoduje to ze kulka sie odbija od krawedzi okienka aktualnego wiec mozna resaizowac okienko do woli
            //a kulk bedzie nadal sie odbijala
            if (nowaKulkaY < 0 || nowaKulkaY > this.ClientSize.Height-50)//sprawdzam czy kulka nie wychodzi poza wysokosc mojego panelu
                dy = -dy;//jesli wychodzi zmieniam kierunek ruchu w odwrotna strone

            x += dx;//przesuwam kulke o dx w szerokosci
            y += dy;//przesuwam kulke o dy w wysokosci
            Invalidate();
        }

        private void Form1_Load(object sender, EventArgs e){

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            ruszKulke();//w timerze ktorego odswierzanie mam ustawione na 10 na tick uruchamia metode ruszKulke()
        }
    }
}
